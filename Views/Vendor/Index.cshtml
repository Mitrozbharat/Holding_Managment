@model VendorViewModelWithpagingnation
<style>
    .Addressoverflow {
        width: 175px;
        /* overflow: hidden; */
        white-space: break-spaces;
        /* text-overflow: ellipsis; */
        display: -webkit-box;
        max-width: 100%;
        height: 42px;
        /* margin: 0 auto; */
        font-size: 14px;
        line-height: 1.5;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>
<body>
    <div class="container-fluid mt-lg-2">
        <div class=" p-2">
            <div class="row align-items-center">
                <div class="col-12 col-md-5 ">
                    <h3 class="text-primary pt-2 pl-4">Vendor</h3>
                </div>
                <div class="col-12 col-md-7">

                    <div class="d-flex flex-column flex-md-row justify-content-md-end">
                        <button type="submit" class="mb-3 mb-md-0 w-25 w-md-25 text-white rounded btn btn-primary" data-toggle="modal" data-target="#addVendorModal">Add Vendor</button>

                        <input type="search" id="searchQuery" autocomplete="off" placeholder="Search.." class="ml-4 rounded-pill p-2 ml-2 btn-outline-red" style="border:1px solid " value="@Model.SearchQuery" oninput="searchCustomers()" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Razor condition to focus the search input when the query is not empty -->
    @if (!string.IsNullOrEmpty(Model.SearchQuery))
    {
        <script>
            $(document).ready(function () {
                var searchInput = $('#searchQuery');
                searchInput.focus();

                // Set the cursor at the end of the input field
                var val = searchInput.val();
                searchInput.val('').val(val); // Clears and sets the value back to move the cursor to the end
            });
        </script>
    }

    <div class="col-lg-12 grid-margin stretch-card mt-2">
        <div class="card">
            <div class="container-fluid p-2">

                <!-- Search and Row Quantity Section -->
                <div class="row mb-2">

                    <div class="col-md-1">
                        <select id="rowQuantity" class="form-control" onchange="updateRowQuantity()" style="outline: 1px solid #b4b4b4;color: #050000;">
                            @if (Model.PageSize == 5)
                            {
                                <option value="5" selected>5</option>
                            }
                            else
                            {
                                <option value="5">5</option>
                            }

                            @if (Model.PageSize == 10)
                            {
                                <option value="10" selected>10</option>
                            }
                            else
                            {
                                <option value="10">10</option>
                            }

                            @if (Model.PageSize == 20)
                            {
                                <option value="20" selected>20</option>
                            }
                            else
                            {
                                <option value="20">20</option>
                            }

                            @if (Model.PageSize == 50)
                            {
                                <option value="50" selected>50</option>
                            }
                            else
                            {
                                <option value="50">50</option>
                            }


                        </select>
                    </div>
                </div>

                <!-- Table Section -->
                <div class="table-responsive mt-4">
                    <table class="table table-striped" id="customersTable">
                        <thead>
                            <tr class="text-center">
                                <th>Sr.NO</th>
                                <th>Business Name</th>
                                <th>Vendor Name</th>
                                <th>Email</th>
                                <th>GSTIN</th>
                                <th>Contact</th>
                                <th>City</th>
                                <th>Address</th>
                                <th>State</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.Vendor.Any())
                            {
                                int num = (Model.CurrentPage - 1) * Model.PageSize + 1;
                                foreach (var item in Model.Vendor)
                                {
                                    <tr class="text-center">
                                        <td>@num</td>
                                        <td>@item.BusinessName</td>
                                        <td>@item.VendorName</td>
                                        <td>@item.Email</td>
                                        <td>@item.GstNo</td>
                                        <td>@item.ContactNo</td>
                                        <td>@item.City</td>
                                        <td title="@item.Address">
                                            <div class="Addressoverflow">@item.Address</div>
                                        </td>
                                        <td>@item.State</td>
                                        <td>
                                            <button type="button" class="btn btn-primary p-2"
                                                    data-toggle="modal"
                                                    data-target="#editVendorModalLabel"
                                                    onclick="openVendorEditmodal('@item.Id', '@item.BusinessName', '@item.VendorName',
                                                     '@item.Email', '@item.GstNo', '@item.ContactNo',
                                                     '@item.AlternateNumber', '@item.City', '@item.Address', '@item.State')">
                                                                <i class="mdi mdi-table-edit"></i>
                                            </button>
                                            |
                                            <button type="button" class="btn btn-danger p-2" data-toggle="modal" data-target="#deleteModal" onclick="openDeleteModalforvendor(@item.Id)">
                                                <i class="mdi mdi-delete"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    num++;
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="8" class="text-center">No customers found</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

                <!-- Pagination Section -->
                <div class="pagination justify-content-end m-2">
                    @if (Model.TotalPages > 0)
                    {
                        if (Model.CurrentPage > 1)
                        {
                            <a href="@Url.Action("Index", new { searchQuery = Model.SearchQuery, pageNumber = Model.CurrentPage - 1, pageSize = Model.PageSize })" class="btn btn-primary">Previous</a>
                        }

                        for (int i = 1; i <= Model.TotalPages; i++)
                        {
                            <a href="@Url.Action("Index", new { searchQuery = Model.SearchQuery, pageNumber = i, pageSize = Model.PageSize })" class="btn @(i == Model.CurrentPage ? "btn-secondary" : "btn-light")">@i</a>
                        }

                        if (Model.CurrentPage < Model.TotalPages)
                        {
                            <a href="@Url.Action("Index", new { searchQuery = Model.SearchQuery, pageNumber = Model.CurrentPage + 1, pageSize = Model.PageSize })" class="btn btn-primary">Next</a>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
   

    <!-- Add Vendor Modal -->
    <div class="modal fade" id="addVendorModal" tabindex="-1" aria-labelledby="addVendorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addVendorModalLabel">Add Vendor</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addVendorForm">
                      
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="businessName">Business Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border businessName" id="businessName" name="BusinessName" placeholder="Business Name" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="VendorPersonName">Contact Person Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border VendorPersonName" id="VendorPersonName" name="VendorName" placeholder="Contact Person Name" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="email">Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control custom-border email" id="email" name="email" placeholder="Email" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="gstn">GST Number </label>
                                <input type="text" class="form-control custom-border gstn" id="gstn" name="GstNo" placeholder="GST Number">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="contactNumber">Contact Number <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border contactNumber" id="contactNumber" name="ContactNo" placeholder="Contact Number" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="alternateNumber">Alternate Number</label>
                                <input type="text" class="form-control custom-border alternateNumber" id="alternateNumber" name="alternateNumber" placeholder="Alternate Number">
                            </div>
                        </div>
                        <div class="form-row">

                            <div class="form-group col-md-6">
                                <label for="city">City <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border city" id="city" name="city" placeholder="City" required>
                            </div>

                            <div class="form-group col-md-6">
                                <label for="address">Address <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border address" id="address" name="Address" placeholder="Address" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="state">State</label>
                                <select class="form-control custom-border state" id="state" name="State" style="border: 1px solid black; border-radius:10px" required>
                                    <option value="">Select state</option>
                                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                    <option value="Daman and Diu">Daman and Diu</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Ladakh">Ladakh</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Puducherry">Puducherry</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                </select>

                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveVendorButton">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Vendor Modal -->
    <div class="modal fade" id="editVendorModal" tabindex="-1" aria-labelledby="editVendorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editVendorModalLabel">Edit Vendor</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editVendorForm">
                        <input type="hidden" id="editVendorId" name="Id">
                        <input type="hidden" id="isdelete" name="isdelete">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="editBusinessName">Business Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border editBusinessName" id="editBusinessName" name="editBusinessName" placeholder="Business Name" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="editVendorPersonName">Contact Person Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border editVendorPersonName" id="editVendorPersonName" name="editVendorPersonName" placeholder="Contact Person Name" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="editemail">Email <span class="text-danger ">*</span></label>
                                <input type="email" class="form-control custom-border editemail" id="editemail" name="editemail" placeholder="Email" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="editGstNo">GST Number</label>
                                <input type="text" class="form-control custom-border editGstNo" id="editGstNo" name="editGstNo" placeholder="GST Number">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="editContactNo">Contact Number <span class="text-danger">*</span></label>
                                <input type="text" class="form-control custom-border editContactNo" id="editContactNo" name="editContactNo" placeholder="Contact Number" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="editalternateNumber">Alternate Number</label>
                                <input type="text" class="form-control custom-border editalternateNumber" id="editalternateNumber" name="editalternateNumber" placeholder="Alternate Number">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="editcity">City</label>
                                <input type="text" class="form-control custom-border editcity" id="editcity" name="editcity" placeholder="City">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="editaddress">Address</label>
                                <input type="text" class="form-control custom-border editaddress" id="editaddress" name="editaddress" placeholder="Address">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-12">
                                <label for="editstate">State</label>
                                <select class="form-control custom-border editstate" id="editstate" name="editstate">
                                    <option value="">Select state</option>
                                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                    <option value="Daman and Diu">Daman and Diu</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Ladakh">Ladakh</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Puducherry">Puducherry</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary updateVendor" id="updateVendor">Update</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content " style="border-radius:20px;">
                <div class="modal-header">
                    <h5 class="modal-title text-primary" id="deleteModalLabel">Delete</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="text-muted-foreground text-center mt-2">Are you sure you want to Delete this vendor?</p>
                    <input type="hidden" id="deleteVendorId" value="" />
                </div>
                <div class="modal-footer justify-content-center">

                    <button type="button" class="btn btn-danger" id="deleteConfirmButton">Delete</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function searchCustomers() {
            var searchQuery = document.getElementById('searchQuery').value;
            var pageSize = document.getElementById('rowQuantity').value;
            window.location.href = `/Vendor/Index?searchQuery=${searchQuery}&pageNumber=1&pageSize=${pageSize}`;
        }

        function updateRowQuantity() {
            var pageSize = document.getElementById('rowQuantity').value;
            var searchQuery = document.getElementById('searchQuery').value;
            window.location.href = `/Vendor/Index?searchQuery=${searchQuery}&pageNumber=1&pageSize=${pageSize}`;
        }


        function openVendorEditmodal(id, businessName, vendorName, email, gstNo, contactNo, alternateNumber, city, address, state) {
                // Set the values of the input fields in the modal
             $('#editVendorId').val(id);
            $('#editBusinessName').val(businessName);
            $('#editVendorPersonName').val(vendorName);
            $('#editemail').val(email);
            $('#editGstNo').val(gstNo);
            $('#editContactNo').val(contactNo);
            $('#editalternateNumber').val(alternateNumber); // Ensure the field ID matches your HTML
            $('#editcity').val(city);
            $('#editaddress').val(address);
            $('#editstate').val(state);

            // Show the modal using Bootstrap's modal method
            $('#editVendorModal').modal('show'); // Bootstrap-specific method for better compatibility

            // Create a vendor details object for logging purposes
            let vendorDetails = {
                id: id,
                businessName: businessName,
                vendorName: vendorName,
                email: email,
                gstNo: gstNo,
                contactNo: contactNo,
                alternateNumber: alternateNumber,
                city: city,
                address: address,
                state: state
                    };

            console.table("Vendor:", vendorDetails);
            }

    //          $('#updateVendorButton').click(function () {

    //     event.preventDefault(); // Prevent the default form submission
    //     // Clear previous error messages
    //     $('.error-message').remove();

    //     const hasNumber = /\d/;
    //     const textRegex = /^[a-zA-Z\s]+$/; // Text only (letters and spaces)
    //     const contactNumberRegex = /^\d{10}$/; // Exactly 10 digits

    //     var isValid = true;

    //     let id = $('#editVendorId').val();
    //     let editBusinessName = document.getElementsByClassName('editBusinessName')[ 0 ].value.trim();
    //     let editVendorPersonName = document.getElementsByClassName('editVendorPersonName')[ 0 ].value.trim();
    //     let editContactNo = document.getElementsByClassName('editContactNo')[ 0 ].value.trim();
    //     let editemail = document.getElementsByClassName('editemail')[ 0 ].value.trim();
    //     let editGstNo = document.getElementsByClassName('editGstNo')[ 0 ].value.trim();

    //     let editalternateNumber = document.getElementsByClassName('alternateNumber')[ 0 ].value.trim();
    //     let editcity = document.getElementsByClassName('editcity')[ 0 ].value.trim();
    //     let editaddress = document.getElementsByClassName('editaddress')[ 0 ].value.trim();
    //     let editstate = document.getElementsByClassName('editstate')[ 0 ].value.trim();


    //     // Check Business Name
    //     if ($('#editBusinessName').val().trim() === '') {
    //         $('#editBusinessName').after('<span class="error-message text-danger">This field is required.</span>');
    //         isValid = false;
    //     } else if (!textRegex.test(editBusinessName)) {
    //         $('.editBusinessName').after('<span class="error-message text-danger">Business Name must contain only letters.</span>');
    //         isValid = false;
    //     }

    //     // Check Contact Person Name
    //     if ($('#editVendorPersonName').val().trim() === '') {
    //         $('#editVendorPersonName').after('<span class="error-message text-danger">This field is required.</span>');
    //         isValid = false;
    //     } else if (!textRegex.test(editVendorPersonName)) {
    //         $('.editVendorPersonName').after('<span class="error-message text-danger">Vendor Name must contain only letters.</span>');
    //         isValid = false;
    //     }


    //     // Check Email
    //     if ($('#editemail').val().trim() === '') {
    //         $('#editemail').after('<span class="error-message text-danger">This field is required.</span>');
    //         isValid = false;
    //     } if (!validateEmail(editemail)) {
    //         $('.editemail').after('<span class="error-message text-danger">Enter a valid email address.</span>');
    //         isValid = false;
    //     }

    //     function validateEmail(email) {
    //         // Simple email validation regex
    //         const emailRegex = /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/;
    //         return emailRegex.test(email);
    //     }


    //     // Check Contact Number
    //     if ($('#editContactNo').val().trim() === '') {
    //         $('#editContactNo').after('<span class="error-message text-danger">This field is required.</span>');
    //         isValid = false;
    //     }

    //     if (editContactNo === '') {
    //         $('.editContactNo').after('<span class="error-message text-danger">This field is required.</span>');
    //         isValid = false;
    //     }
    //     else if (!contactNumberRegex.test(editContactNo)) {
    //         $('.editContactNo').after('<span class="error-message text-danger">Contact Number must be exactly 10 digits.</span>');
    //         isValid = false;
    //     }

    //     // Check if GST Number (if filled) is exactly 15 characters long
    //     var gstNumber = $('#editGstNo').val().trim();
    //     if (gstNumber !== '' && gstNumber.length !== 15) {
    //         $('#editGstNo').after('<span class="error-message text-danger">GST Number must be exactly 15 characters.</span>');
    //         isValid = false;
    //     }

    //     // If the form is valid, proceed with the AJAX submission
    //     if (isValid) {

    //         var vendorId = $('#editVendorId').val(); // Get vendor ID from hidden input
    //         var formData = {
    //             Id:id,
    //             BusinessName: editBusinessName,
    //             VendorName: editVendorPersonName,
    //             City: editcity,
    //             Address: editaddress,
    //             Email: editemail,
    //             AlternateNumber:editalternateNumber,
    //             ContactNo: editContactNo,
    //             State: editstate   

    //         };

    //         console.log("Updating Vendor with ID: " + formData);


    //         alert("ok");


    //         $.ajax({
    //             type: "PUT",
    //             url: '/Vendor/EditVendor', // Update URL as needed
    //             data: JSON.stringify(formData),
    //             success: function (response) {
    //                 if (response.success) {
    //                     toastr.success('Vendor updated successfully.');
    //                     document.getElementById("editVendorModal").style.display = 'none'
    //                     location.reload(); // Reload the page after successful update
    //                 } else {
    //                     toastr.error('Error updating vendor.');
    //                 }
    //             },
    //             error: function (xhr, status, error) {
    //                 console.error(xhr.responseText); // Log any errors
    //                 toastr.error('An error occurred while updating the vendor.');
    //             }
    //         });

    //     } else {
    //         toastr.error('Please fill all the required fields.');
    //     }

      
    // });


    </script>

    <script>

        $('#saveVendorButton').on('click',function (e) {

        $('.error-message').remove();
        
       // Validate required fields     businessName VendorPersonName email gstn contactNumber
       var isValid = true;
       const hasNumber = /\d/;
       const textRegex = /^[a-zA-Z\s]+$/; // Text only (letters and spaces)
       const contactNumberRegex = /^\d{10}$/; // Exactly 10 digits


       let businessName = document.getElementsByClassName('businessName')[ 0 ].value.trim();

       let VendorPersonName = document.getElementsByClassName('VendorPersonName')[ 0 ].value.trim();

       let email = document.getElementsByClassName('email')[ 0 ].value.trim();

       let gstn = document.getElementsByClassName('gstn')[ 0 ].value.trim();

       let contactNumber = document.getElementsByClassName('contactNumber')[ 0 ].value.trim();

       let alternateNumber = document.getElementsByClassName('alternateNumber')[ 0 ].value.trim();

       let city = document.getElementsByClassName('city')[ 0 ].value.trim();

       let address = document.getElementsByClassName('address')[ 0 ].value.trim();

       let state = document.getElementsByClassName('state')[ 0 ].value.trim();



       // Check Business Name
       if ($('#businessName').val().trim() === '') {
           $('#businessName').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;

       } else if (!textRegex.test(businessName)) {
           $('.businessName').after('<span class="error-message text-danger">Business Name must contain only letters.</span>');
           isValid = false;
       }

       // Check Contact Person Name
       if ($('#VendorPersonName').val().trim() === '') {
           $('#VendorPersonName').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;
       } else if (!textRegex.test(VendorPersonName)) {
           $('.VendorPersonName').after('<span class="error-message text-danger">Vendor Name must contain only letters.</span>');
           isValid = false;
       }


       if ($('.email').val().trim() === '') {
           $('.email').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;
       } else if (!validateEmail(email)) {
           $('.email').after('<span class="error-message text-danger">Enter a valid email address.</span>');
           isValid = false;
       }

       // Check Contact Numbe

       if (contactNumber === '') {
           $('.contactNumber').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;
       }
       else if (!contactNumberRegex.test(contactNumber)) {
           $('.contactNumber').after('<span class="error-message text-danger">Contact Number must be exactly 10 digits.</span>');
           isValid = false;
       }



       // Check if GST Number (if filled) is exactly 15 characters long
       var gstNumber = $('#gstn').val().trim();
       if (gstNumber !== '' && gstNumber.length !== 15) {
           $('#gstn').after('<span class="error-message text-danger">GST Number must be exactly 15 characters.</span>');
           isValid = false;
       }


       if ($('#city').val().trim() === '') {
           $('#city').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;
       } else if (!textRegex.test(city)) {
           $('.city').after('<span class="error-message text-danger">City  must contain only letters.</span>');
           isValid = false;
       }



       if (address === '') {
           $('.address').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;
       }
     

       if (state === '') {
           $('.state').after('<span class="error-message text-danger">This field is required.</span>');
           isValid = false;
       }




       // If the form is valid, proceed with the AJAX submission
       if (isValid) {
           var formData = $('#addVendorForm').serialize();
           console.log(formData); // Check serialized data in console

           $.ajax({
               type: "POST",
               url: '/Vendor/AddVendor', // Match the controller action name
               data: formData,
               success: function (response) {
                   console.log("success" + response);
                   if (response.message == "Vendor Add Successfully. ") {
                       toastr.success('Vendor added successfully.');
                       location.reload(); // Optionally reload the page
                   }
                   else {
                       toastr.error('An error occurred while adding.');
                   }

               },
               error: function (xhr, status, error) {
                   console.error(xhr.responseText); // Log any errors
                   toastr.error('An error occurred while adding the vendor.');
               }
           });







       } else {
           toastr.error('Please fill all the required fields.');
       }


   });
          function validateEmail(email) {
                        var re = /^[a-zA-Z0-9._%+-]+@@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                return re.test(email);
                    }

    </script>
    <script src="~/js/VendorJavascript.js"></script>

</body>
